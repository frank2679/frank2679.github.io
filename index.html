<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"frank2679.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="about technology, living and fire">
<meta property="og:type" content="website">
<meta property="og:title" content="Fire">
<meta property="og:url" content="https://frank2679.github.io/index.html">
<meta property="og:site_name" content="Fire">
<meta property="og:description" content="about technology, living and fire">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Frank">
<meta property="article:tag" content="Technology">
<meta property="article:tag" content="Life">
<meta property="article:tag" content="Fire">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://frank2679.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Fire</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Fire</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">星星之火</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Frank</p>
  <div class="site-description" itemprop="description">about technology, living and fire</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2024/10/22/20241022-code-coverage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/22/20241022-code-coverage/" class="post-title-link" itemprop="url">C++ Code Coverage</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-10-22 15:46:50 / 修改时间：19:17:25" itemprop="dateCreated datePublished" datetime="2024-10-22T15:46:50+08:00">2024-10-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>本文档介绍了如何在 C++ 项目中生成代码覆盖率报告。我们将使用 <code>lcov</code> 和 <code>gcovr</code> 工具来生成 HTML 格式的覆盖率报告。</p>
<h2 id="示例项目"><a href="#示例项目" class="headerlink" title="示例项目"></a>示例项目</h2><p>以下是一个简单的 C++ 项目示例，展示了如何配置和生成代码覆盖率报告。</p>
<h3 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cpp</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;2 + 3 = &quot;</span> &lt;&lt; <span class="built_in">add</span>(<span class="number">2</span>, <span class="number">3</span>) &lt;&lt; std::endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>)  </span><br><span class="line"><span class="keyword">project</span>(SimpleCppProject)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 选项：启用代码覆盖率  </span></span><br><span class="line"><span class="keyword">option</span>(COVERAGE <span class="string">&quot;Enable coverage reporting&quot;</span> <span class="keyword">ON</span>)  </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(COVERAGE)  </span><br><span class="line">    <span class="keyword">add_compile_options</span>(--coverage)  </span><br><span class="line">    <span class="keyword">link_libraries</span>(--coverage)  </span><br><span class="line"><span class="keyword">endif</span>()  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加可执行文件  </span></span><br><span class="line"><span class="keyword">add_executable</span>(simple_cpp main.cpp)</span><br></pre></td></tr></table></figure>


<h2 id="生成代码覆盖率报告"><a href="#生成代码覆盖率报告" class="headerlink" title="生成代码覆盖率报告"></a>生成代码覆盖率报告</h2><h3 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h3><p><img src="/2024/10/22/20241022-code-coverage/03_cov_flow.drawio.svg"></p>
<ol>
<li><strong>CMake 添加编译选项</strong>：在 CMakeLists.txt 中启用代码覆盖率选项。</li>
<li><strong>编译和运行程序</strong>：生成可执行文件并运行，生成 <code>.gcda</code> 和 <code>.gcno</code> 文件。<ul>
<li>示例文件路径：<code>./build/CMakeFiles/simple_cpp.dir/main.cpp.gcno</code></li>
</ul>
</li>
<li><strong>使用 lcov 生成 HTML 报告</strong>：<ul>
<li>执行命令：<code>lcov --capture --directory . --output-file coverage.info</code></li>
<li>生成 HTML：<code>genhtml coverage.info --output-directory out</code></li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>注意</strong>：</p>
<ol>
<li>生成的 <code>.gcda</code> 和 <code>.gcno</code> 文件不在当前路径。</li>
<li><code>gcov</code> 解析 C++ 文件时会去掉 <code>.cpp</code> 后缀。</li>
</ol>
</blockquote>
<h3 id="使用-llvm-gcov-替代-gcov"><a href="#使用-llvm-gcov-替代-gcov" class="headerlink" title="使用 llvm-gcov 替代 gcov"></a>使用 llvm-gcov 替代 gcov</h3><p>在步骤 3 中，可以使用 <code>llvm-gcov</code> 替代 <code>gcov</code>：</p>
<ul>
<li>命令：<code>lcov -c -d . --gcov-tool *llvm-gcov* -o coverage.info</code></li>
</ul>
<p><img src="/2024/10/22/20241022-code-coverage/01_lcov_report.png" alt="lcov 报告"></p>
<h3 id="尝试使用-gcovr"><a href="#尝试使用-gcovr" class="headerlink" title="尝试使用 gcovr"></a>尝试使用 gcovr</h3><p><code>gcovr</code> 是一个 Python 封装的前端工具，比 <code>lcov</code> 更轻量。<code>lcov</code> 报告文件更详细，包含被调用的头文件。</p>
<ul>
<li>运行 <code>supa project</code> 时遇到错误，原因是使用了错误的 <code>gcov</code> 版本，需要使用 <code>llvm-gcov</code>。</li>
<li>命令：<code>gcovr -r .. --html --html-details -o gcovr_report2/coverage.html --gcov-ignore-errors</code></li>
</ul>
<p><img src="/2024/10/22/20241022-code-coverage/02_gcovr_report.png" alt="gcovr 报告"></p>
<h2 id="部署指南"><a href="#部署指南" class="headerlink" title="部署指南"></a>部署指南</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ol>
<li>本地能够只运行某（几）个用例，查看相应源码的覆盖率。</li>
<li>基于 <code>supa</code> 项目构建相同的流程。</li>
</ol>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><ol>
<li>编译时打开覆盖率开关。</li>
<li>运行目标程序，生成 <code>.gcda</code> 和 <code>.gcno</code> 文件。</li>
<li>运行脚本 <code>gen_cov_report.sh</code>，生成 HTML 报告。</li>
</ol>
<p>通过以上步骤，您可以轻松地在 C++ 项目中生成代码覆盖率报告，并进行分析和优化。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/08/31/202308-02-cpp-raii/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/31/202308-02-cpp-raii/" class="post-title-link" itemprop="url">聊聊 C++ RAII</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-31 22:14:35" itemprop="dateCreated datePublished" datetime="2023-08-31T22:14:35+08:00">2023-08-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-09-07 10:49:59" itemprop="dateModified" datetime="2023-09-07T10:49:59+08:00">2023-09-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#1-raii">1. RAII</a><ul>
<li><a href="#11-%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF">1.1. 问题场景</a></li>
</ul>
</li>
<li><a href="#2-%E4%BD%BF%E7%94%A8-smart-ptr">2. 使用 smart ptr</a><ul>
<li><a href="#21-%E6%8C%87%E5%AE%9A-deleter">2.1. 指定 deleter</a></li>
<li><a href="#22-%E4%BD%BF%E7%94%A8-make_unique">2.2. 使用 make_unique()</a></li>
</ul>
</li>
<li><a href="#3-summary">3. Summary</a></li>
</ul>
<h2 id="1-RAII"><a href="#1-RAII" class="headerlink" title="1. RAII"></a>1. RAII</h2><p>代码中常常需要管理资源，可能是内存，可能是锁，或者是某个 handle 等等，下面抽象了 acquire, release 两个接口分别表示获取和释放资源。</p>
<h3 id="1-1-问题场景"><a href="#1-1-问题场景" class="headerlink" title="1.1. 问题场景"></a>1.1. 问题场景</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> *<span class="title">acquire</span><span class="params">(<span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; __FUNCTION__ &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; size &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">malloc</span>(size);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">release</span><span class="params">(<span class="type">void</span> *ptr)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">free</span>(ptr);</span><br><span class="line">    std::cout &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">void</span> *ptr = <span class="built_in">acquire</span>(<span class="number">100</span>);</span><br><span class="line">    <span class="comment">// use of ptr</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">release</span>(ptr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">doSomething</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>会有如下打印</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acquire 100</span><br><span class="line">release</span><br></pre></td></tr></table></figure>

<p>上面是 C 风格实现，这种实现需要程序员保证获取和释放一一对应，所以常常导致资源没释放，或者重复释放的问题。</p>
<p>RAII 意思是在 scope 内申请的资源在退出 scope 的时候自动释放，不用程序员来管理。从而极大地解放了程序员的负担，也从根本上杜绝资源的泄漏和重复释放。</p>
<h2 id="2-使用-smart-ptr"><a href="#2-使用-smart-ptr" class="headerlink" title="2. 使用 smart ptr"></a>2. 使用 smart ptr</h2><p>C++ built-in 的 smart ptr 具备 RAII 能力。</p>
<h3 id="2-1-指定-deleter"><a href="#2-1-指定-deleter" class="headerlink" title="2.1. 指定 deleter"></a>2.1. 指定 deleter</h3><p>这样可以用 unique_ptr 的 RAII 机制，当 <code>doSomething()</code> 结束时，会调用 deleter 函数，也就是 release。</p>
<p>实际上 acquire，release 是对 malloc，free 的封装，如果就用 malloc，free 的话是不需要特别指定的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> ptr =</span><br><span class="line">        std::<span class="built_in">unique_ptr</span>&lt;<span class="type">void</span>, <span class="keyword">decltype</span>(&amp;release)&gt;(<span class="built_in">acquire</span>(<span class="number">100</span>), release);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是这种做法有一种情况似乎不好处理，当 acquire 定义如下，就比较麻烦了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">acquire2</span><span class="params">(<span class="type">void</span> **ptr, <span class="type">int</span> size)</span></span></span><br></pre></td></tr></table></figure>


<p>对于上面处理不了的情形，可以用下面的办法，可以用。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">void</span> *ptr = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in">acquire2</span>(&amp;ptr, <span class="number">100</span>);</span><br><span class="line">    <span class="keyword">auto</span> gen_ptr =</span><br><span class="line">        std::<span class="built_in">unique_ptr</span>&lt;<span class="type">void</span>, <span class="keyword">decltype</span>(&amp;release)&gt;(std::<span class="built_in">move</span>(ptr), release);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种实现不推荐，有以下两个原因</p>
<ol>
<li>长得丑；</li>
<li>ptr 还在，很可能被拿来做别的事情，也可能被 double free；</li>
</ol>
<h3 id="2-2-使用-make-unique"><a href="#2-2-使用-make-unique" class="headerlink" title="2.2. 使用 make_unique()"></a>2.2. 使用 make_unique()</h3><p>对需要管理的资源封装成一个资源管理类，在 constructor, destructor 中进行申请和释放。</p>
<blockquote>
<p>make_unique是C++14引入的函数,它提供了一个更简单安全的方式来创建std::unique_ptr。</p>
</blockquote>
<blockquote>
<p>std::make_unique可以避免手动使用new来创建对象,它将对象创建和内存分配合并到一步,这样可以避免手动delete带来的潜在危险。</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CustomMemoryMan</span> &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">CustomMemoryMan</span>(<span class="type">int</span> size) &#123; ptr_ = <span class="built_in">acquire</span>(size); &#125;</span><br><span class="line">    ~<span class="built_in">CustomMemoryMan</span>() &#123; <span class="built_in">release</span>(ptr_); &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="type">void</span> *ptr_ = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> mem = std::<span class="built_in">make_unique</span>&lt;CustomMemoryMan&gt;(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use of gen_ptr</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-Summary"><a href="#3-Summary" class="headerlink" title="3. Summary"></a>3. Summary</h2><p>推荐最后的版本，即封装一个资源管理类，再使用 <code>make_unique</code> 来构建。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/08/16/202308-01-cpp-compile-optimize/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/08/16/202308-01-cpp-compile-optimize/" class="post-title-link" itemprop="url">cpp 编译时间优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-08-16 10:48:50 / 修改时间：11:53:40" itemprop="dateCreated datePublished" datetime="2023-08-16T10:48:50+08:00">2023-08-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#%E5%8E%9F%E7%90%86">原理</a></li>
<li><a href="#%E5%81%9A%E6%B3%95">做法</a></li>
<li><a href="#%E6%95%88%E6%9E%9C">效果</a></li>
</ul>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>cmake 官方文档：<a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/v3.16/prop_tgt/UNITY_BUILD.html">UNITY_BUILD — CMake 3.16.9 Documentation</a></p>
<p>原理解释：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/146434531">使用 Unity Build 加速 CMake 编译 - 知乎 (zhihu.com)</a></p>
<p>cpp 代码由于历史原因只能以文件为单位进行编译，有以下问题</p>
<blockquote>
<ol>
<li>每个编译单元，都需要独立解析所有包含的头文件:<br>a. 如果N个源文件引用到了同一个头文件，则这个头文件需要解析N次（对于 <code>protobuf</code>这类动辄几千上万行的头文件简直就是鬼故事）；<br>b. 如果头文件中有模板(STL&#x2F;Boost)，则该模板在每个cpp文件中使用时都会做一次实例化，N个源文件中的 <code>std::vector&lt;int&gt;</code>会实例化N次。</li>
<li>每个源文件独立编译，导致编译优化时只能基于本文件内容进行优化，很难跨编译单元提供代码优化；</li>
<li>基于问题2，C&#x2F;C++ 跨编译单元的优化只能交给链接器，而链接阶段是单进程，无法并行加速，导致大项目链接极慢。</li>
</ol>
<p>From <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/146434531">使用 Unity Build 加速 CMake 编译 - 知乎 (zhihu.com)</a></p>
</blockquote>
<p>unity build 的思路是将多个文件合入到一个 cpp 文件中，最后只编译合并后的 cpp，这样可以很大程度上解决上述问题。将哪些文件合并到一个 cpp 文件中，可以借鉴模块化思路，将一个模块的代码放到一个 cpp 中，如此，一个模块中的公用头文件就只会被编译一次。</p>
<p>综上，对于<strong>模板</strong>用的多的场景，unity build 非常有效。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>上面的知乎分享中给出了手动合并文件的做法，这种做法更精细，不过成本高，要求开发者对代码相当熟悉。其实 cmake 本身也支持 unity build，由 cmake 帮你决定哪些文件合并到一起，并且有一个上限——最多 UNITY_BUILD_BATCH_SIZE 个文件合并到一个文件中。</p>
<blockquote>
<p>When this property is set to true, the target source files will be combined into batches for faster compilation. This is done by creating a (set of) unity sources which <code>&lt;span class=&quot;pre&quot;&gt;#include&lt;/span&gt;</code> the original sources, then compiling these unity sources instead of the originals. This is known as a <em>Unity</em> or <em>Jumbo</em> build. The <a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/v3.16/prop_tgt/UNITY_BUILD_BATCH_SIZE.html#prop_tgt:UNITY_BUILD_BATCH_SIZE"><code>&lt;span class=&quot;pre&quot;&gt;UNITY_BUILD_BATCH_SIZE&lt;/span&gt;</code></a> property controls the upper limit on how many sources can be combined per unity source file.</p>
</blockquote>
<blockquote>
<p>From: <a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/v3.16/prop_tgt/UNITY_BUILD.html">UNITY_BUILD — CMake 3.16.9 Documentation</a></p>
</blockquote>
<p>在 CMakeLists.txt 中做如下配置</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$&#123;CMAKE_VERSION&#125;</span> <span class="keyword">VERSION_GREATER_EQUAL</span> <span class="string">&quot;3.16.9&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set_target_properties</span>(<span class="variable">$&#123;TARGET&#125;</span> PROPERTIES UNITY_BUILD <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set_target_properties</span>(<span class="variable">$&#123;TARGET&#125;</span> PROPERTIES UNITY_BUILD_BATCH_SIZE <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>优化前</p>
<p><img src="/2023/08/16/202308-01-cpp-compile-optimize/1692151104184.png" alt="1692151104184"></p>
<p>优化后</p>
<p><img src="/2023/08/16/202308-01-cpp-compile-optimize/1692151172333.png" alt="1692151172333"></p>
<p>编译文件数量减少了，383 -&gt; 180，时间也减少了 226s -&gt; 33s，这个 build 中之所以有这么大的好处是因为该实现中大量使用了模板。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/06/26/202306-01-graphviz-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/06/26/202306-01-graphviz-md/" class="post-title-link" itemprop="url">graphviz 简介</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-26 17:54:13" itemprop="dateCreated datePublished" datetime="2023-06-26T17:54:13+08:00">2023-06-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-08-16 10:47:32" itemprop="dateModified" datetime="2023-08-16T10:47:32+08:00">2023-08-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ol>
<li>home page: <a target="_blank" rel="noopener" href="https://graphviz.org/">Graphviz</a></li>
<li>user guide: <a target="_blank" rel="noopener" href="https://graphviz.readthedocs.io/en/stable/manual.html">User Guide — graphviz 0.20.1 documentation</a></li>
<li>repo: <a target="_blank" rel="noopener" href="https://gitlab.com/graphviz/graphviz">graphviz &#x2F; graphviz · GitLab</a></li>
<li>wiki: <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Graphviz#Applications_that_use_Graphviz">Graphviz - Wikipedia</a></li>
</ol>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>非常棒的学习对象，学习构建一个自己的工具。不少常见应用（confluence, doxygen, sphinx 等）都通过插件的方式用上它。</p>
<ol>
<li>提供 python 接口，可以快速构图</li>
<li>提供 cmd line，包括 dot 等多个 binary</li>
<li>提供插件，给 confluence，doxygen 等提供服务</li>
<li>定义了 dot 语言</li>
</ol>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><ol>
<li>生成 dot 文件 <code>cmake --graphviz=dot_file_prefix ..</code> 每个目标都会生成一个 dot 文件</li>
<li>将 dot 文件转成图片， <code>dot -Tsvg graph_sublas.dot.gtest_trsv &gt; graph_trsv.svg</code></li>
</ol>
<p><img src="/2023/06/26/202306-01-graphviz-md/graph_trsv.svg" alt="1687769988727"></p>
<p>dot 语言如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">digraph &quot;gtest_trsv&quot; &#123;</span><br><span class="line">node [</span><br><span class="line">  fontsize = &quot;12&quot;</span><br><span class="line">];</span><br><span class="line">    &quot;node137&quot; [ label = &quot;gtest_trsv&quot;, shape = egg ];</span><br><span class="line">    &quot;node1&quot; [ label = &quot;/home/jenkins/workspace/xxx/build/openblas_binary_file/lib/libopenblas.a&quot;, shape = septagon ];</span><br><span class="line">    &quot;node137&quot; -&gt; &quot;node1&quot; [ style = dotted ] // gtest_trsv -&gt; /home/jenkins/workspace/xxx/build/openblas_binary_file/lib/libopenblas.a</span><br><span class="line">    &quot;node3&quot; [ label = &quot;gtest&quot;, shape = octagon ];</span><br><span class="line">    &quot;node137&quot; -&gt; &quot;node3&quot; [ style = dotted ] // gtest_trsv -&gt; gtest</span><br><span class="line">    &quot;node4&quot; [ label = &quot;Threads::Threads&quot;, shape = pentagon ];</span><br><span class="line">    &quot;node3&quot; -&gt; &quot;node4&quot;  // gtest -&gt; Threads::Threads</span><br><span class="line">    &quot;node5&quot; [ label = &quot;-pthread&quot;, shape = septagon ];</span><br><span class="line">    &quot;node4&quot; -&gt; &quot;node5&quot; [ style = dashed ] // Threads::Threads -&gt; -pthread</span><br><span class="line">    &quot;node6&quot; [ label = &quot;gtest_main&quot;, shape = octagon ];</span><br><span class="line">    &quot;node137&quot; -&gt; &quot;node6&quot; [ style = dotted ] // gtest_trsv -&gt; gtest_main</span><br><span class="line">    &quot;node4&quot; [ label = &quot;Threads::Threads&quot;, shape = pentagon ];</span><br><span class="line">    &quot;node6&quot; -&gt; &quot;node4&quot;  // gtest_main -&gt; Threads::Threads</span><br><span class="line">    &quot;node3&quot; [ label = &quot;gtest&quot;, shape = octagon ];</span><br><span class="line">    &quot;node6&quot; -&gt; &quot;node3&quot;  // gtest_main -&gt; gtest</span><br><span class="line">    &quot;node7&quot; [ label = &quot;openblas_static\n(openblas)&quot;, shape = octagon ];</span><br><span class="line">    &quot;node137&quot; -&gt; &quot;node7&quot;  // gtest_trsv -&gt; openblas_static</span><br><span class="line">    &quot;node5&quot; [ label = &quot;-pthread&quot;, shape = septagon ];</span><br><span class="line">    &quot;node7&quot; -&gt; &quot;node5&quot;  // openblas_static -&gt; -pthread</span><br><span class="line">    &quot;node8&quot; [ label = &quot;driver_level2&quot;, shape = hexagon ];</span><br><span class="line">    &quot;node7&quot; -&gt; &quot;node8&quot;  // openblas_static -&gt; driver_level2</span><br><span class="line">    &quot;node9&quot; [ label = &quot;driver_level3&quot;, shape = hexagon ];</span><br><span class="line">    &quot;node7&quot; -&gt; &quot;node9&quot;  // openblas_static -&gt; driver_level3</span><br><span class="line">    &quot;node10&quot; [ label = &quot;driver_others&quot;, shape = hexagon ];</span><br><span class="line">    &quot;node7&quot; -&gt; &quot;node10&quot;  // openblas_static -&gt; driver_others</span><br><span class="line">    &quot;node11&quot; [ label = &quot;interface&quot;, shape = hexagon ];</span><br><span class="line">    &quot;node7&quot; -&gt; &quot;node11&quot;  // openblas_static -&gt; interface</span><br><span class="line">    &quot;node12&quot; [ label = &quot;kernel&quot;, shape = hexagon ];</span><br><span class="line">    &quot;node7&quot; -&gt; &quot;node12&quot;  // openblas_static -&gt; kernel</span><br><span class="line">    &quot;node13&quot; [ label = &quot;pthread&quot;, shape = septagon ];</span><br><span class="line">    &quot;node137&quot; -&gt; &quot;node13&quot; [ style = dotted ] // gtest_trsv -&gt; pthread</span><br><span class="line">    &quot;node14&quot; [ label = &quot;xxx&quot;, shape = doubleoctagon ];</span><br><span class="line">    &quot;node137&quot; -&gt; &quot;node14&quot; [ style = dotted ] // gtest_trsv -&gt; xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h3><p>学习 graphviz 来制作一个属于自己的工具。</p>
<h3 id="todo"><a href="#todo" class="headerlink" title="todo"></a>todo</h3><p>cmake 是如何集成 graphviz 的，graphviz 是如何让 cmake 集成的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/05/21/202305-02-sports/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/21/202305-02-sports/" class="post-title-link" itemprop="url">AI 不能替我们锻炼身体</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-21 14:49:59" itemprop="dateCreated datePublished" datetime="2023-05-21T14:49:59+08:00">2023-05-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-08-16 10:47:32" itemprop="dateModified" datetime="2023-08-16T10:47:32+08:00">2023-08-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>半年来的一次游泳的随想——AI 不能替我们运动</p>
<p>人的生命短短百年，硅基生命是永久的。人的生命的质量在于其健康程度，而健康可以分为睡眠（休息放松），运动，饮食，工作压力，四个方面。最近总是讨论 “AI 会替代哪些工作？” “哪些工作不会被替代？” 我倒是觉得，有一个问题是非常确定的，那就是 AI 必然越来越强大，“如何不让人的身体成为感受幸福的障碍，或者如何保持人的精神活力？”</p>
<p>个人观点，健康非常重要（当然并不是说失去健康的人就不可能幸福了）。AI 可以给人提供健康的建议，但是真正执行这些建议的还是人自己，比如睡眠，总是熬夜，AI 提醒你了，你控制不住自己，总想多看一会儿电子产品；比如运动，要人自己去动起来，而不是”被动”运动（也可能未来真的会有，但是个人不看好）；比如饮食，AI 告诉你清淡饮食，你控制不住自己的食欲。</p>
<p>今天主要讲讲游泳的感受，游了不到一个小时，1.5km，已经半年没有游泳了，这半年运动量相对之前少了很多，体重升到 147 斤，早起不来，早睡做不到，常常脑袋昏昏沉沉，人变得慵懒，拖延症加剧，无法保持一小时以上的专注力……游完泳之后，人的精神状态立马不一样了，更容易结构化地思考。运动也让人更加自信，有这么大的运动负荷我都能顶住，其他事情上遇到困难我不会怕了。</p>
<p>关于拖延症，今天上午本来应该 8 点半就去游泳的，硬是看手机到 11 点才出发，总觉得还有时间，<strong>其实做好的时间就是当下</strong>。过去的在当前的理论及技术下是无法更改的，不需要为过去有懊恼，而是要建设性地思考当下要怎么做才是最优的。</p>
<p>如何培养运动的习惯，其实更多是心理上的改变，需要把它变成一个正反馈过程，或者换个说法，可以帮助我抵抗对疾病的恐惧。我遇到过一个困境，游泳想了各种办法没有看到进步，于是没有动力继续下去了。这其实是下下策。其实它隐含一个假设是不运动健康水平是保持不变的。其实这个假设不成立，如果以时间为横轴，健康水平为纵轴，画出一条线，没有运动的话，这条线必然是向下走的。至少保持现有的运动习惯。还可以做的就是找伙伴，找老师，他们会给你一些反馈，帮助你成长。还有一点观念调整，因为投入和得到在短时间内不是连续的，更像是离散的，阶跃的，不要让自己停在发生阶跃的前一刻。其实时间拉长了，连续的成长才会显现出来，而且肯定是一个增幅减小的曲线。做长期主义者。</p>
<p>未来 30 年可能会变成什么样？不管什么样，人得是健康的，这是幸福的前提。所以做好这笔长期投资，稳赚不赔，投的越久，收益越大。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/05/07/202305-01-mac-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/05/07/202305-01-mac-usage/" class="post-title-link" itemprop="url">用 Mac 学习英文</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-05-07 11:16:45" itemprop="dateCreated datePublished" datetime="2023-05-07T11:16:45+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-08-16 10:47:32" itemprop="dateModified" datetime="2023-08-16T10:47:32+08:00">2023-08-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a><ul>
<li><a href="#youtube">Youtube</a></li>
<li><a href="#podcast">Podcast</a></li>
<li><a href="#dictionary">Dictionary</a></li>
<li><a href="#%E6%96%87%E5%AD%97%E5%A3%B0%E9%9F%B3%E8%BD%AC%E6%8D%A2">文字声音转换</a><ul>
<li><a href="#speech">speech</a></li>
<li><a href="#dictation">dictation</a></li>
</ul>
</li>
<li><a href="#%E7%BF%BB%E8%AF%91">翻译</a></li>
</ul>
</li>
</ul>
<h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>最近使用 Macbook 学习英语，有以下一些途径</p>
<ol>
<li>podcast</li>
<li>dictionary</li>
<li>文字声音转换</li>
<li>翻译</li>
<li>youtube</li>
</ol>
<p>英文学习的一点心得</p>
<ol>
<li>是不要把它当成一个学科，它就是个工具，日常使用，变成肌肉记忆，养成英文思维</li>
<li>学英语时不要用翻译，尽量查字典（不是翻译，用英英字典），你学母语时（第一个语言）时没有翻译可用</li>
<li>多读，多听，多复述</li>
</ol>
<p>还需要做一些事情</p>
<ol>
<li>评估英语水平的方法</li>
<li>英语水平认证，比如雅思</li>
</ol>
<h3 id="Youtube"><a href="#Youtube" class="headerlink" title="Youtube"></a>Youtube</h3><ol>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/@EnglishEasyPractice/about">English Easy Practice - YouTube</a> 很棒的英语学习课程，通过简单的故事和对话，以及互动问答来轻松学习英语</li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/@zaharaEnglish/about">zaharaEnglish - YouTube</a> 中国人分享生活中的英语，以及一些发音，没事看一看也挺好的</li>
</ol>
<h3 id="Podcast"><a href="#Podcast" class="headerlink" title="Podcast"></a>Podcast</h3><p>非常棒的 app，且免费。</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.merriam-webster.com/">Merriam webster</a> 不错的英文字典，它还提供了 word of the day podcast，每天听一个，培养英文思维</li>
<li><a target="_blank" rel="noopener" href="https://dailyeasyenglish.libsyn.com/">Daily Easy English Expression</a>: 简单有趣，每次讲一个地道的英语表达</li>
</ol>
<h3 id="Dictionary"><a href="#Dictionary" class="headerlink" title="Dictionary"></a>Dictionary</h3><p>Macbook 自带的字典，免费。可以添加各种语言的字典，如上所说，去掉英汉字典，我们不是想要翻译，而是字典。</p>
<p><img src="/2023/05/07/202305-01-mac-usage/1683433277966.png" alt="1683433277966"></p>
<p>有个缺点是 Dictionary 没有单词发音，目前我用 macbook 自带的 speech 功能来解决的，当然如果是用在线字典一般都是有发音的。</p>
<h3 id="文字声音转换"><a href="#文字声音转换" class="headerlink" title="文字声音转换"></a>文字声音转换</h3><p>说的有点拗口，其实就是选中文字 macbook 给你朗读出来，来听一听发音，或者自己说，macbook 给你转成文字。</p>
<h4 id="speech"><a href="#speech" class="headerlink" title="speech"></a>speech</h4><p>可以做到选择文本，按快捷键（默认 option + esc，我改成了 option + space），可以发音。</p>
<p><img src="/2023/05/07/202305-01-mac-usage/1683433489057.png" alt="1683433489057"></p>
<p><img src="/2023/05/07/202305-01-mac-usage/1683433446170.png" alt="1683433446170"></p>
<p>其实不用 speech， Macbook 原本可以右击鼠标（或者两个手指同时按触控板）就有 speaking 功能。</p>
<p><img src="/2023/05/07/202305-01-mac-usage/1683433998892.png" alt="1683433998892"></p>
<h4 id="dictation"><a href="#dictation" class="headerlink" title="dictation"></a>dictation</h4><p>支持语音输入，转成文字。</p>
<p><img src="/2023/05/07/202305-01-mac-usage/1683433555318.png" alt="1683433555318"></p>
<p><img src="/2023/05/07/202305-01-mac-usage/1683433606799.png" alt="1683433606799"></p>
<h3 id="翻译"><a href="#翻译" class="headerlink" title="翻译"></a>翻译</h3><p>要尽量少用，我觉得它会阻碍自然语言思维模式的养成。直接英文思维肯定是比翻译来得快得多。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/03/28/202303-01-elon-mask/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/28/202303-01-elon-mask/" class="post-title-link" itemprop="url">读埃隆马斯克传</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-03-28 00:05:52 / 修改时间：11:05:12" itemprop="dateCreated datePublished" datetime="2023-03-28T00:05:52+08:00">2023-03-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>读完马斯克的传，大受震撼。他是强者，敢想敢做并且都做成的典范。</p>
<p>埃隆的第一个特点是专注。埃隆很小就读遍各种书籍，这一点让我想到了峻哥。果然都是牛人。其次是埃隆的思维真的别具一格，埃隆是有点自闭的，也正是如此他才别别人更能专注。水哥也说过，其实他做的事也没那么难，只是我们没用心去做而已。然而我们越来越难以专心做事了。</p>
<p>独特的思维模式，第一性原理，埃隆总是基于基本原理来推导来做决策。这一点很了不起，主要在于其从 0 到 1 的能力和勇气。后者更为难得。</p>
<p>强落地，不妥协。埃隆能够将天马行空的想法通过理论工具来具体化，再通过不眠不休的努力快速落地。这个过程他几乎是偏执的，这一点和乔布斯很像。</p>
<p>我不能苟同的是他的工作态度（他的使命感超强），他的理论是如果一件事做成后能赚 X，那在这件事做成之前的时间就是损失。这一点，除了 PUA 我没看到内在逻辑的合理性。他和身边人的关系似乎也不是很融洽，有点”畸形”。比如两度离婚的第二任妻子，以及第一任离婚的妻子，以及左膀右臂的布朗等等。看得出他和他身边的人的关系是不健康的。他的确在肩负使命，能看到他的矢志不渝的决心和努力。可是一个不能和自己，和世界和解的人，我觉得也是不够幸福的。</p>
<p>不管怎样，向埃隆学习，勇敢地去想，去做吧。树立远大目标，多折腾，多体验。</p>
<p>想成为 C++ 大牛，那就去做吧，STL 是最佳实践之一，那就做一个出来，对编译器感兴趣，那就搞一个。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/02/05/2023-02-insurance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/02/05/2023-02-insurance/" class="post-title-link" itemprop="url">保险一扫盲及初步配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-05 12:44:41" itemprop="dateCreated datePublished" datetime="2023-02-05T12:44:41+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-03-28 11:05:12" itemprop="dateModified" datetime="2023-03-28T11:05:12+08:00">2023-03-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#1-%E4%BF%9D%E9%99%A9%E4%B8%80%E6%89%AB%E7%9B%B2%E5%8F%8A%E5%88%9D%E6%AD%A5%E9%85%8D%E7%BD%AE">1. 保险一扫盲及初步配置</a></li>
<li><a href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E9%A3%8E%E9%99%A9%E4%BF%9D%E9%99%A9">2. 什么是风险&#x2F;保险</a></li>
<li><a href="#3-%E4%BF%9D%E9%99%A9%E8%A1%8C%E4%B8%9A%E5%A6%82%E4%BD%95">3. 保险行业如何</a></li>
<li><a href="#4-%E4%BF%9D%E9%99%A9%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D">4. 保险产品介绍</a><ul>
<li><a href="#41-%E9%87%8D%E7%96%BE%E9%99%A9">4.1. 重疾险</a></li>
<li><a href="#42-%E5%AF%BF%E9%99%A9">4.2. 寿险</a></li>
<li><a href="#43-%E5%8C%BB%E7%96%97%E9%99%A9">4.3. 医疗险</a></li>
<li><a href="#44-%E6%84%8F%E5%A4%96%E9%99%A9">4.4. 意外险</a></li>
</ul>
</li>
<li><a href="#5-%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%E4%BF%9D%E9%99%A9">5. 如何配置保险</a><ul>
<li><a href="#51-%E6%96%B9%E6%B3%95%E8%AE%BA%E5%8E%9F%E5%88%99%E6%AD%A5%E9%AA%A4">5.1. 方法论(原则&#x2F;步骤)</a></li>
<li><a href="#52-%E5%85%B7%E4%BD%93%E6%A1%88%E4%BE%8B">5.2. 具体案例</a><ul>
<li><a href="#521-%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C%E7%9A%84%E8%AF%84%E4%BC%B0">5.2.1. 配置结果的评估</a><ul>
<li><a href="#5211-%E7%94%B7%E6%96%B9%E5%AE%B6%E5%BA%AD%E4%B8%BB%E8%A6%81%E6%94%B6%E5%85%A5%E6%9D%A5%E6%BA%90%E4%BF%9D%E9%99%A9%E9%85%8D%E7%BD%AE%E8%AF%84%E4%BC%B0">5.2.1.1. 男方(家庭主要收入来源)保险配置评估</a></li>
<li><a href="#5212-%E5%A5%B3%E6%96%B9%E4%BF%9D%E9%99%A9%E9%85%8D%E7%BD%AE%E8%AF%84%E4%BC%B0">5.2.1.2. 女方保险配置评估</a></li>
</ul>
</li>
<li><a href="#522-%E6%9C%80%E7%BB%88%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C">5.2.2. 最终配置结果</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-%E5%90%8E%E7%BB%AD">6. 后续</a></li>
<li><a href="#7-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">7. 参考资料</a></li>
</ul>
<h1 id="1-保险一扫盲及初步配置"><a href="#1-保险一扫盲及初步配置" class="headerlink" title="1. 保险一扫盲及初步配置"></a>1. 保险一扫盲及初步配置</h1><p>这篇文章是笔者自己（非保险专业人士）最近配置保险做的调研和实操的结果。主要为了回答以下几个问题：</p>
<ul>
<li>什么是风险&#x2F;保险</li>
<li>保险行业怎么样</li>
<li>保险产品是怎样的</li>
<li>如何配置保险，结合一个实例说明</li>
</ul>
<p>先说结论，</p>
<ul>
<li>保险很重要！很重要！很重要！</li>
<li>越早越好，最好能 30 岁之前就能配置好。</li>
<li>家庭经济支柱优先配置。</li>
<li>个人配置意见：只需要考虑 4 种极端风险就好。</li>
</ul>
<h1 id="2-什么是风险-x2F-保险"><a href="#2-什么是风险-x2F-保险" class="headerlink" title="2. 什么是风险&#x2F;保险"></a>2. 什么是风险&#x2F;保险</h1><p>已经年过而立，愈发觉得自己不再是一人吃饱全家不饿，首先要解决钱的问题，而要解决钱的问题，先考虑还不是挣多少钱，而是花多少钱。简言之，要守住钱袋子，避免一夜回到解放前。</p>
<p>小概率事件很少发生，却几乎决定了事情的发展走向。我们需要讨论的是不好的小概率事件，极端风险，包括【身故】【意外身故】【意外全残】【重疾】。<strong>保险要做的事情不是避免风险发生，而是降低或者是消解风险产生的经济后果</strong>。<br>当然还有很多其他风险，但是我们重点关心这些影响人生轨迹的风险。后面也仅讨论这 4 个风险。这些风险一旦发生，可能会产生两个经济后果，</p>
<ol>
<li>经济收入急剧下跌</li>
<li>需要高额的治疗费用</li>
</ol>
<p>保险要做的就是消解这两个风险，对于收入下跌，保险公司一次性赔付，对于高额医疗费用，保险公司来报销。</p>
<h1 id="3-保险行业如何"><a href="#3-保险行业如何" class="headerlink" title="3. 保险行业如何"></a>3. 保险行业如何</h1><p>在此之前，笔者（以及身边的人）对保险行业都有刻板印象：低文化水平的保险代理人忽悠自己的亲朋好友买各种“用不上”的保险，买卖保险的人都不清楚保险的逻辑以及保险产品的应用场景。</p>
<p>经过一番调研发现我国的保险行业监管是世界上最严的，其监管机构就是<a target="_blank" rel="noopener" href="https://www.cbirc.gov.cn/cn/view/pages/index/index.html">银保监会</a>。任何一个获得授权的保险公司，再小其实也都是巨头。且其监管和保障体系相当完善了。其实某种程度上银行都没保险公司可靠，因为银行也需要保险来兜底。保险公司即便倒闭了，人寿保单依然生效，会转给其他保险公司。</p>
<h1 id="4-保险产品介绍"><a href="#4-保险产品介绍" class="headerlink" title="4. 保险产品介绍"></a>4. 保险产品介绍</h1><p>这里只讨论个人保障型保险，包括重疾险，医疗险，寿险，意外险。一般家庭配置以上保险就可以覆盖我们上面提到的 4 个极端风险。</p>
<p>根据理赔方式不同可以分为赔付型，报销型两类产品。其中（百万）医疗险是报销型，也就是报销看病花的钱。重疾险和寿险都是赔付型，一旦触发直接赔付一定额度的钱（等于保单的保额）。意外险则既包括意外伤残导致的医药费报销和意外身故导致的赔付。</p>
<blockquote>
<p>需要特别说明，保险产品条款非常复杂，缺少背景，很容易被这些纷繁的信息绕晕，找不到重点。这也是为啥要找一个靠谱的保险经纪人，让他帮你全局规划。不过即便如此，投保人也应该自己补充相关常识，因为家庭（个人）的状况自己最清楚，保险配置也应该随着家庭（个人）状况的变化而调整，具备了保险的基础知识，才能和经纪人更有效地沟通，合理配置保险。</p>
</blockquote>
<h2 id="4-1-重疾险"><a href="#4-1-重疾险" class="headerlink" title="4.1. 重疾险"></a>4.1. 重疾险</h2><p><a target="_blank" rel="noopener" href="https://cps.qixin18.com/m/apps/cps/sdc1089040/product/detail?prodId=104502&planId=129440&tenantId=-1%E8%BE%BE%E5%B0%94%E6%96%877%E5%8F%B7%E9%87%8D%E5%A4%A7%E7%96%BE%E7%97%85%E4%BF%9D%E9%99%A9">达尔文 7 号</a></p>
<p><strong>这里不是推荐这个产品，强烈建议读者可以点进去看这个重疾险的具体配置，去感受一下各种配置的权利和义务</strong>。</p>
<p>重疾险是保险配置中的大头，占比 70%以上。</p>
<p>笔者做一个简单的汇总，我比较看重几个点：</p>
<ol>
<li>保额，第一优先级，是上面提到的赔付的额度；</li>
<li>保障期间，一般可以分为 60 岁以内，或者终身，也会极大影响保额；</li>
<li>60 岁前增加赔付比例，一般是 50%-100%，比如保额是 50 万，如果增加 50%就是 75 万；</li>
</ol>
<p>其他一些不是关键的点，建议读者不要过分关注，以免带偏整体把控：</p>
<ol>
<li>覆盖重疾种类，最不重要的，因为银保监局已经把常见重疾做了硬性要求，其他的是小概率事件中的小概率事件了；</li>
<li>身故责任，会极大影响保费，建议可以用寿险覆盖；</li>
<li>轻中症赔付，多次赔付都是次要的，评估极端情况就够了；</li>
<li>豁免，触发重症后不用再交保费，一般重疾险都会有的，没有的话要小心；</li>
</ol>
<h2 id="4-2-寿险"><a href="#4-2-寿险" class="headerlink" title="4.2. 寿险"></a>4.2. 寿险</h2><p><a target="_blank" rel="noopener" href="https://cps.qixin18.com/apps/cps/sdc1089040/product/detail?prodId=104401&planId=129234&aid=&tenantId=-1%E9%BC%8E%E8%AF%9A%E5%AE%9A%E6%B5%B7%E6%9F%B12%E5%8F%B7%E5%AE%9A%E6%9C%9F%E5%AF%BF%E9%99%A9">鼎诚定海柱 2 号定期寿险（互联网专属）</a></p>
<p><strong>这里不是推荐这个产品，强烈建议读者可以点进去看这个重疾险的具体配置，去感受一下各种配置的权利和义务</strong>。</p>
<p>寿险的配置比例仅次于重疾险。主要应对身故&#x2F;<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/27513776">全残</a>风险.</p>
<h2 id="4-3-医疗险"><a href="#4-3-医疗险" class="headerlink" title="4.3. 医疗险"></a>4.3. 医疗险</h2><p><a target="_blank" rel="noopener" href="https://cps.qixin18.com/apps/cps/sdc1089040/product/detail?prodId=104386&planId=129184&aid=&tenantId=-1e">e 享护-医享无忧百万医疗险（20 年期）-个人版</a></p>
<p><strong>这里不是推荐这个产品，强烈建议读者可以点进去看这个重疾险的具体配置，去感受一下各种配置的权利和义务</strong>。</p>
<p>医疗险是报销型的，可以非常有效地应对看病贵，看病难的问题也可以配置高配医疗险，费用差别是 200 到 1000 。</p>
<p>医疗险的重点是趁早配置，趁自己身体还好，年纪在可保范围内来配置。尤其快到 60 岁的人，一定要尽快安排上。很多保险产品都是可以 20 年续保的。</p>
<h2 id="4-4-意外险"><a href="#4-4-意外险" class="headerlink" title="4.4. 意外险"></a>4.4. 意外险</h2><p><a target="_blank" rel="noopener" href="https://cps.qixin18.com/apps/cps/sdc1089040/product/detail?prodId=104523&planId=129473&aid=&tenantId=-1%E5%B0%8F%E8%9C%9C%E8%9C%823%E5%8F%B7%E7%BB%BC%E5%90%88%E6%84%8F%E5%A4%96%E9%99%A9">小蜜蜂 3 号综合意外险 尊享版</a></p>
<p><strong>这里不是推荐这个产品，强烈建议读者可以点进去看这个重疾险的具体配置，去感受一下各种配置的权利和义务</strong>。</p>
<p>应对交通事故等意外导致的伤残风险。这部分保费非常低，应该不缺这点保费。</p>
<h1 id="5-如何配置保险"><a href="#5-如何配置保险" class="headerlink" title="5. 如何配置保险"></a>5. 如何配置保险</h1><h2 id="5-1-方法论-原则-x2F-步骤"><a href="#5-1-方法论-原则-x2F-步骤" class="headerlink" title="5.1. 方法论(原则&#x2F;步骤)"></a>5.1. 方法论(原则&#x2F;步骤)</h2><p>原则如下</p>
<ol>
<li>重点评估极端风险场景的覆盖情况；</li>
<li>保险配置应该是一套组合方案，不同的人保险方案都不一样，不要太关注具体产品选择，那是经纪人的事情；</li>
<li>多咨询几个保险经纪人，对比一下，基本就能避坑骗保；</li>
</ol>
<p>大致步骤如下</p>
<ol>
<li>找合适的经纪人（不止一个，对比挑一挑）；</li>
<li>自己学习保险相关常识，了解保险配置的基本框架；</li>
<li>和经纪人反复沟通需求，调整方案；</li>
</ol>
<h2 id="5-2-具体案例"><a href="#5-2-具体案例" class="headerlink" title="5.2. 具体案例"></a>5.2. 具体案例</h2><p>一个家庭配置，基本情况，家庭中男女生均 30 岁，房贷 200 万，年入 50 万，开销（包括房贷） 30 万，男方是家庭的经济主要来源。保费预算 2 万。</p>
<h3 id="5-2-1-配置结果的评估"><a href="#5-2-1-配置结果的评估" class="headerlink" title="5.2.1. 配置结果的评估"></a>5.2.1. 配置结果的评估</h3><h4 id="5-2-1-1-男方-家庭主要收入来源-保险配置评估"><a href="#5-2-1-1-男方-家庭主要收入来源-保险配置评估" class="headerlink" title="5.2.1.1. 男方(家庭主要收入来源)保险配置评估"></a>5.2.1.1. 男方(家庭主要收入来源)保险配置评估</h4><table>
<thead>
<tr>
<th align="center">风险</th>
<th align="right">重疾险</th>
<th align="right">医疗险</th>
<th align="right">寿险</th>
<th align="right">意外险</th>
<th>合计</th>
</tr>
</thead>
<tbody><tr>
<td align="center">重大疾病身故</td>
<td align="right">赔付 75 万</td>
<td align="right">–</td>
<td align="right">赔付 200 万</td>
<td align="right">–</td>
<td>赔付 275 万</td>
</tr>
<tr>
<td align="center">意外身故</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">赔付 200 万</td>
<td align="right">赔付 100 万</td>
<td>赔付 300 万</td>
</tr>
<tr>
<td align="center">意外全残</td>
<td align="right">–</td>
<td align="right">报销 200 万</td>
<td align="right">赔付 200 万</td>
<td align="right">赔付 100 万</td>
<td>赔付 300 万，报销 200 万</td>
</tr>
<tr>
<td align="center">重大疾病</td>
<td align="right">赔付 75 万</td>
<td align="right">报销 400 万</td>
<td align="right">–</td>
<td align="right">–</td>
<td>赔付 75 万，报销 400 万</td>
</tr>
<tr>
<td align="center">保费</td>
<td align="right">6867</td>
<td align="right">247</td>
<td align="right">2178</td>
<td align="right">288</td>
<td>9580</td>
</tr>
</tbody></table>
<h4 id="5-2-1-2-女方保险配置评估"><a href="#5-2-1-2-女方保险配置评估" class="headerlink" title="5.2.1.2. 女方保险配置评估"></a>5.2.1.2. 女方保险配置评估</h4><table>
<thead>
<tr>
<th align="center">风险</th>
<th align="right">重疾险</th>
<th align="right">医疗险</th>
<th align="right">寿险</th>
<th align="right">意外险</th>
<th>合计</th>
</tr>
</thead>
<tbody><tr>
<td align="center">重大疾病身故</td>
<td align="right">赔付 50 万</td>
<td align="right">–</td>
<td align="right">赔付 100 万</td>
<td align="right">–</td>
<td>赔付 150 万</td>
</tr>
<tr>
<td align="center">意外身故</td>
<td align="right">–</td>
<td align="right">–</td>
<td align="right">赔付 100 万</td>
<td align="right">赔付 100 万</td>
<td>赔付 200 万</td>
</tr>
<tr>
<td align="center">意外全残</td>
<td align="right">–</td>
<td align="right">报销 200 万</td>
<td align="right">赔付 100 万</td>
<td align="right">赔付 100 万</td>
<td>赔付 200 万，报销 200 万</td>
</tr>
<tr>
<td align="center">重大疾病</td>
<td align="right">赔付 50 万</td>
<td align="right">报销 400 万</td>
<td align="right">–</td>
<td align="right">–</td>
<td>赔付 50 万，报销 400 万</td>
</tr>
<tr>
<td align="center">保费</td>
<td align="right">4110</td>
<td align="right">279</td>
<td align="right">607</td>
<td align="right">288</td>
<td>5284</td>
</tr>
</tbody></table>
<h3 id="5-2-2-最终配置结果"><a href="#5-2-2-最终配置结果" class="headerlink" title="5.2.2. 最终配置结果"></a>5.2.2. 最终配置结果</h3><p><img src="/2023/02/05/2023-02-insurance/insurance_solution_mind_Fotor.png"></p>
<h1 id="6-后续"><a href="#6-后续" class="headerlink" title="6. 后续"></a>6. 后续</h1><p>主要是理赔事项的关注，以及优化配置。</p>
<ol>
<li>理赔相关，如何理赔，理赔对治疗的影响</li>
<li>医疗险的高额配置，VIP 通道等</li>
<li>境外保险配置</li>
</ol>
<h1 id="7-参考资料"><a href="#7-参考资料" class="headerlink" title="7. 参考资料"></a>7. 参考资料</h1><ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/35232580/">1 小时搞定全家保险</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Insurance#Insurance_companies">保险公司 wikipedia</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/528130445">保险公司和银行，哪个更安全</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/145272776?utm_source=wechat_session&utm_medium=social&utm_oi=48243891240960">【保险内幕】我用在保险公司的亲身经验，告诉你保险公司到底有多…</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/150438452?utm_id=0">全面测评 152 款重疾险，选出 2020 年 6 月性价比之王</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/01/07/leader_one_year/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/07/leader_one_year/" class="post-title-link" itemprop="url">做 leader 一年了</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-07 00:40:40" itemprop="dateCreated datePublished" datetime="2023-01-07T00:40:40+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-03-28 11:05:12" itemprop="dateModified" datetime="2023-03-28T11:05:12+08:00">2023-03-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#1-%E5%90%91%E4%B8%8A%E7%AE%A1%E7%90%86-vs-%E5%90%91%E4%B8%8B%E7%AE%A1%E7%90%86">1. 向上管理 vs 向下管理</a></li>
<li><a href="#2-people-leader-vs-technique-leader">2. People leader vs Technique leader</a></li>
<li><a href="#3-%E7%AE%A1%E7%90%86-vs-%E6%8A%80%E6%9C%AF">3. 管理 vs 技术</a></li>
<li><a href="#4-%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE-vs-%E7%AE%A1%E7%90%86%E4%BA%BA">4. 管理项目 vs 管理人</a></li>
<li><a href="#5-%E8%90%A5%E9%80%A0%E5%81%A5%E5%BA%B7%E7%9A%84%E5%9B%A2%E9%98%9F%E6%B0%9B%E5%9B%B4%E6%9C%89%E4%B8%BA-vs-%E6%97%A0%E4%B8%BA">5. 营造健康的团队氛围，“有为” vs “无为”</a></li>
<li><a href="#6-leader-%E6%9C%80%E5%8E%89%E5%AE%B3-vs-%E7%BB%84%E5%91%98%E6%AF%94-leader-%E5%8E%89%E5%AE%B3">6. leader 最厉害 vs 组员比 leader 厉害</a></li>
</ul>
<p>做 leader 是从 2021.10 月份开始，已经持续了 14 个月，渐渐有一些心得。大概有以下一些点</p>
<h2 id="1-向上管理-vs-向下管理"><a href="#1-向上管理-vs-向下管理" class="headerlink" title="1. 向上管理 vs 向下管理"></a>1. 向上管理 vs 向下管理</h2><p>如果把工作比喻为打仗，那 leader 的职责是领好方向，并带出一支训练有素的队伍。</p>
<p>向下管理，直觉上是主要职责，责无旁贷。需要给团队指明方向，同时还要培养团队，在工作中训练他们，关心他们，帮助他们尽快成长。从而实现个人与团队双赢的好效果。</p>
<p>向上管理，比较容易忽视，也常常会联想到套近乎，拍马屁等负面形象。实际上并不是。<br>向上管理包括多跟老板（公司）的目标对齐，本质上我们就是在拿老板的钱<strong>帮老板解决问题</strong>，所以不要轻易觉得老板的想法很愚蠢，相反，他应该比你懂得多。如果出现刚刚的情况，更多的时候是你看错了。<br>除此，懂得如何汇报，对跟老板无缝合作也是很有裨益。</p>
<p>我觉得向上管理，跟向下管理的精力分配应该是<strong>二八原则</strong>，前者只需要固定频率去接触以下就好，后者是要花主要精力去实践的。很遗憾，当前自己所在团队的情况基本是反过来的。老板过分对他的老板向上管理，导致对他的下属也是如此要求，过于频繁的管理行为，就像是经济学中的宏观调控，而无视<strong>市场规律</strong>，完全是<strong>计划经济</strong>，组织僵化，效率低下，内卷，劣币驱逐良币的情况时有发生。</p>
<h2 id="2-People-leader-vs-Technique-leader"><a href="#2-People-leader-vs-Technique-leader" class="headerlink" title="2. People leader vs Technique leader"></a>2. People leader vs Technique leader</h2><p>个人觉得这是个伪命题，更多的是公司组织的一个噱头罢了。<br>leader 就是 leader，一个不能 lead 项目的 leader 不会是合格的 leader，不能 lead 人的也不会是合格的 leader。<br>可能有人会觉得术业有专攻，且八路军还有团长和政委之分，但是实际上他们就是一个主一个次而已，people leader, tech leader 就是个鸡肋，真的相信这个说辞反而是双输。</p>
<h2 id="3-管理-vs-技术"><a href="#3-管理-vs-技术" class="headerlink" title="3. 管理 vs 技术"></a>3. 管理 vs 技术</h2><p>这个是个经典命题了，这个也可以叫做<strong>软技能 vs 硬技能</strong>，这个命题也对 individual contributor 适用。<br>要做一个 leader，两者必须兼备，只是两者之一不同人各有突出罢了，但是几乎一定是都要超过一个及格线。初阶是硬技能成长更快，对他的要求也是如此，高阶则是更看重软技能，软技能的提升也一般要更慢一些，比如包括与人沟通、格局、善良、自我要求高等，这些品质也更看天意，要改变相对更困难一些。</p>
<h2 id="4-管理项目-vs-管理人"><a href="#4-管理项目-vs-管理人" class="headerlink" title="4. 管理项目 vs 管理人"></a>4. 管理项目 vs 管理人</h2><p>管理项目，主体是项目，它有一套比较健全的方法论和流程，以及工具，比如 JIRA，conf，git，teams，WBS 等。相对比较简单。</p>
<p>管理人，复杂多了，职场沟通有各种“套路”，但是套路的目的是为了不套路，真诚是最厉害的套路。坚持<strong>不要太把自己当人，不要太不把别人当人</strong>就好了。</p>
<h2 id="5-营造健康的团队氛围，“有为”-vs-“无为”"><a href="#5-营造健康的团队氛围，“有为”-vs-“无为”" class="headerlink" title="5. 营造健康的团队氛围，“有为” vs “无为”"></a>5. 营造健康的团队氛围，“有为” vs “无为”</h2><p>团队氛围管你是“有为”，“无为”，都会形成。但是一个好的，健康的氛围，绝对是有花心思的地方的。<br>最近看到宁高宁说，一个人只要是善良，对人好，对自己要求高，他在一个地方待个两年，他身边自然会形成一个好的氛围。这是某种“无为”，但是实际上对自己要求高，为此付出努力是某种“有为”。<br>除此，还有真的有为，你需要“显式”地去营造氛围，这种要小心，因为很容易用力过猛，弄巧成拙。</p>
<h2 id="6-leader-最厉害-vs-组员比-leader-厉害"><a href="#6-leader-最厉害-vs-组员比-leader-厉害" class="headerlink" title="6. leader 最厉害 vs 组员比 leader 厉害"></a>6. leader 最厉害 vs 组员比 leader 厉害</h2><p>leader 是团队的天花板，这句话我更愿意看成是 leader 对自己的高要求，要尽量通过提升自己来抬升团队的成长空间。<br>但是实际上肯定是有组员在工作的某些方面超过 leader 的，这种应该鼓励他的长处，而不是小家子气，担心功高盖主。leader 要 lead 的将士们的精神，而不是技能。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://frank2679.github.io/2023/01/02/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Frank">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fire">
      <meta itemprop="description" content="about technology, living and fire">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Fire">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/01/02/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-02 15:49:28" itemprop="dateCreated datePublished" datetime="2023-01-02T15:49:28+08:00">2023-01-02</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Frank</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  




<script class="next-config" data-name="utterances" type="application/json">{"enable":"enable","repo":"frank2679/blog_comment_frank","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
